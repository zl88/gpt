!function(){"use strict";var e={5558:function(e,t,n){var a=n(9242),o=(n(7658),n(541),n(3396)),l=n(7139),s=n(4870),i=n(4161);const c={id:"main"},r={id:"center"},u={id:"bottom"};var d=(0,o.aZ)({__name:"dialogCom",props:{title:null,show:{type:Boolean}},setup(e){const t=e;return(e,n)=>((0,o.wg)(),(0,o.iD)("div",{id:"dialog",class:(0,l.C_)({show:t.show})},[(0,o._)("div",c,[(0,o._)("p",null,(0,l.zw)(t.title),1),(0,o._)("div",r,[(0,o.WI)(e.$slots,"center")]),(0,o._)("div",u,[(0,o.WI)(e.$slots,"bottom")])])],2))}}),v=n(89);var p=(0,v.Z)(d,[["__scopeId","data-v-7549cf0a"]]);let h=0;var m=function(e){const t=document.querySelector("body"),n=document.createElement("div");n.id="messageBox",n.className="messageBox-"+ ++h,n.innerHTML=`<div class="${e.type}">${e.content}</div>`,t?.appendChild(n),setTimeout((()=>{h--,n.remove()}),3e3)},f=n(5792),g=n(8134),y=n.n(g),w=n(3099),_=n.n(w);const k=(0,s.iH)("");function b(e){window.localStorage.setItem("n0ts-chatgpt-theme",e),k.value=e}function S(){const e=window.localStorage.getItem("n0ts-chatgpt-theme");e?k.value=e:b("light"),document.documentElement.setAttribute("theme",e||"light")}var C={switchTheme:function(){k.value=window.localStorage.getItem("n0ts-chatgpt-theme"),k.value="light"===k.value?"dark":"light",b(k.value),S()},load:S,themeCache:k},T={key:"",data:{model:"gpt-3.5-turbo"},system:"",max_token:4096};function O(){return window.localStorage.setItem("n0ts-chatgpt-config",JSON.stringify(T)),T}var H={save:O,read:function(){const e=JSON.parse(window.localStorage.getItem("n0ts-chatgpt-config")??"{}");return e.key?(T.key=e.key,T.data=e.data,T.system=e.system,T):O()},config:T},x=n(3812),E=n.n(x);const I=e=>((0,o.dD)("data-v-61099f5e"),e=e(),(0,o.Cn)(),e),P={id:"chatgpt"},A=I((()=>(0,o._)("div",{class:"title",style:{padding:"10px"}},[(0,o._)("a",{href:"#",rel:"noopener",title:"关于本站",onclick:'document.getElementById("dome").innerHTML=obj.sites[0].hello'},[(0,o._)("i",{class:"jiaran"})]),(0,o._)("h1",{style:{display:"none"}},"小陈GPT💕"),(0,o._)("a",{target:"_blank",rel:"noopener",class:"xiaochen",href:"https://cn.bing.com/search?q=%E5%A4%8Fdj%E5%AF%BC%E8%88%AA"},"小陈GPT💕")],-1))),D=I((()=>(0,o._)("i",{class:"line"},null,-1))),j={id:"chats"},U=["onClick"],z=["onClick"],M={id:"bottom"},G={key:0,class:"money"},N={id:"main",class:"box"},B={key:0,id:"messages"},L={class:"img"},Y={key:0,class:"system"},$={key:1,class:"user"},q={key:2,class:"ai"},K=["innerHTML"],J={class:"tokens"},Z=I((()=>(0,o._)("div",{id:"stretch"},null,-1))),F={key:1,id:"home"},V=[(0,o.uE)('<div data-v-61099f5e><h2 data-v-61099f5e>小陈GPT💕 基于 gpt-3.5-turbo</h2><h3 data-v-61099f5e>可以聊天，问问题</h3><div class="content" data-v-61099f5e><p data-v-61099f5e> 因女朋友使用chatgpt有一定困难， 小陈gpt💕 是为我的女朋友小陈制作， 同时提供给我的朋友使用 </p><p data-v-61099f5e>感谢室友小白和禹哥为此免费提供openai的key</p><p data-v-61099f5e> 本网站使用已开源项目构建，感谢作者开源 地址:<a href="https://gitee.com/n0ts/chat-gpt" target="_blank" data-v-61099f5e>Gitee</a></p><p data-v-61099f5e> 请放心使用，数据仅储存在浏览器本地 其他公益GPT项目🍀： <a href="https://www.zlblog.cf/posts/58959#Chat-GtP" target="_blank" data-v-61099f5e>点我进入</a></p><p data-v-61099f5e> ChatGPT 提问指南：<a target="_blank" rel="noopener" href="https://prompts.chat/" data-v-61099f5e>Awesome ChatGPT Prompts</a><span class="p red" data-v-61099f5e>👈英文更新版 | 中文版本👉</span><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/597957542" data-v-61099f5e>ChatGPT 提问的艺术-知乎文章</a></p></div></div>',1)],W={id:"input"},R=I((()=>(0,o._)("p",null,"请在下方输入你的 key",-1))),Q=I((()=>(0,o._)("p",null,[(0,o.Uk)(" 申请地址："),(0,o._)("a",{href:"https://platform.openai.com/account/api-keys",target:"_blank"},"点我")],-1))),X=I((()=>(0,o._)("p",null,[(0,o.Uk)(" 小张的朋友："),(0,o._)("a",{href:"https://www.zlblog.cf/posts/21814.html",target:"_blank"},"点我")],-1))),ee=["onKeydown"],te=I((()=>(0,o._)("p",{class:"tips"}," key 会保存在本地浏览器(localStorage)中，只供本地使用 ",-1))),ne={class:"panel"},ae=I((()=>(0,o._)("p",null,"key：",-1))),oe=I((()=>(0,o._)("p",{class:"tips"},"OpenAI 申请的 Key",-1))),le=I((()=>(0,o._)("p",null,"行为设定：",-1))),se={class:"tips"},ie=I((()=>(0,o._)("span",null,"给 OpenAI 设定一个行为，比如：",-1))),ce=I((()=>(0,o._)("br",null,null,-1))),re=I((()=>(0,o._)("span",null,"“你是一直猫，每句话后面加个 喵~”",-1))),ue=I((()=>(0,o._)("br",null,null,-1))),de=I((()=>(0,o._)("span",null,"又或者",-1))),ve=I((()=>(0,o._)("br",null,null,-1))),pe=["innerHTML"];var he=(0,o.aZ)({__name:"App",setup(e){const t=new(E()),{config:n,read:c,save:r}=H;c();const u=(0,s.iH)(""==n.key);let d=null,v=null;(0,o.bv)((()=>{v=new(_())(document.querySelector("#main")),d=document.querySelector("#messages"),C.load(),n.key&&He()}));const h=(0,s.iH)("");function g(){if(""==h.value)return m({type:"warning",content:"key 不能为空"});n.key=h.value,h.value="",r(),u.value=!1,m({type:"success",content:"key 存储成功，向小陈gpt提问吧"}),He()}const w=(0,s.iH)(!1);async function k(e,t,n){const a=n||t,l={role:e,content:a,tokens:0,stream:a};ye[we.value].contents.push(l),l.tokens=await Ie(l.stream),b(),await(0,o.Y3)(),ke(),v.update()}function b(){window.localStorage.setItem("message-data",JSON.stringify(ye)),Ae()}const S=(0,s.iH)("");function T(){if(""!=S.value&&""!=S.value.trim()&&!w.value){if(-1==we.value&&(ye.unshift({name:"",contents:[]}),we.value=0),n.system&&0==ye[we.value].contents.length&&k("system",n.system),k("user",S.value),1==ye[we.value].contents.length||"system"==ye[we.value].contents[0].role&&2==ye[we.value].contents.length){const e=S.value;let t=1;ye.forEach((n=>{0==n.name.indexOf(e)&&t++})),ye[we.value].name=e+(1==t?"":` #${t}`),document.title=e+" | ChatGPT"}S.value="",async function(){w.value=!0,k("assistant",""),fetch("https://node.fatshady.cn/chatgpt-stream",{method:"POST",body:JSON.stringify({key:n.key,model:n.data.model,messages:ye[we.value].contents.map((e=>({role:e.role,content:e.stream}))),timeout:6e4}),headers:{"Content-Type":"application/json"}}).then((e=>{const n=e.body.getReader(),a=new TextDecoder("utf-8");let l="";n.read().then((async function e(s){if(s.done)return;const i=a.decode(s.value);if(i.includes('"error": {\n'))return w.value=!1,Ee(i);if(i.includes("data: [DONE]")){w.value=!1;const e=ye[we.value].contents[ye[we.value].contents.length-1];return e.tokens=await Ie(e.content),b(),await(0,o.Y3)(),ke(),void v.update()}return i.replaceAll("data: ","").split("\n").filter(Boolean).forEach((async e=>{const n=JSON.parse(e);if(!n.choices[0].delta.content)return;const a=n.choices[0].delta.content;l+=a,ye[we.value].contents[ye[we.value].contents.length-1].content=t.render(l),ye[we.value].contents[ye[we.value].contents.length-1].stream=l,await(0,o.Y3)(),ke()})),n.read().then(e)}))})).catch((()=>{w.value=!1}))}()}}let O=!1;function x(){O||(O=!0,setTimeout((()=>{O=!1,d=document.querySelector("#messages"),d?d.scrollTo({top:d.scrollHeight,behavior:"smooth"}):x()}),300))}let I=!1;function he(e){if(16===e.keyCode&&(I=!0),!I&&13===e.keyCode)return T(),e.preventDefault(),!1}function me(e){16===e.keyCode&&(I=!1)}const fe=(0,s.iH)(64);(0,o.YP)((()=>S.value),(()=>{const e=S.value.split("\n").length;fe.value=64*e}));const ge=window.localStorage.getItem("message-data"),ye=(0,s.qj)(ge?JSON.parse(ge):[]),we=(0,s.iH)(-1);function _e(){b();let e=1;ye.forEach((t=>{0==t.name.indexOf("新会话")&&e++})),ye.unshift({name:"新会话"+(1==e?"":` #${e}`),contents:[]}),S.value="",we.value=0}async function ke(){const e=[];document.querySelectorAll("#messages pre code").forEach((t=>{const n=t;if(n.getAttribute("class")?.includes("hljs"))return;const a=document.createElement("div");a.className="copyBtn",a.innerHTML="复制",a.setAttribute("code",n.innerText),a.addEventListener("click",(e=>{!function(e){const t=e.target.getAttribute("code");t&&(y().copy(t),m({type:"success",content:"复制成功"}))}(e)})),n.parentElement?.appendChild(a),f.Z.highlightElement(n),e.push(n)})),function(e){for(let t=0;t<e.length;t++){const n=e[t].innerHTML.replace(/\n/g,"</li><li>");e[t].innerHTML=`<ol><li>${n}</li></ol>`.replace("<li></li></ol>","</ol>")}}(e),x()}(0,o.YP)((()=>we.value),(async()=>{ye[we.value]&&(document.title=ye[we.value].name+" | 小陈gpt💕",await(0,o.Y3)(),Ae(),ke(),v.update())}));const be=(0,s.iH)(!1);function Se(){window.localStorage.removeItem("message-data"),window.localStorage.removeItem("n0ts-chatgpt-theme"),window.localStorage.removeItem("n0ts-chatgpt-config"),window.location.reload()}const Ce=(0,s.iH)(!1);function Te(){Ce.value=!Ce.value,r(),m({type:"success",content:"设置已保存"})}const Oe=(0,s.iH)(null);async function He(){const{data:e}=await(0,i.Z)({method:"post",url:"https://node.fatshady.cn/cors",data:{method:"GET",url:"https://api.openai.com/dashboard/billing/credit_grants",headers:{authorization:`Bearer ${n.key}`}}});Oe.value=e.data}function xe(e,t){return Number(e.toFixed(t))}function Ee(e){const t=JSON.parse(e.replace("未知错误，请联系站长解决！",""));console.error("报错了哥们",t),ye[we.value].contents[ye[we.value].contents.length-1].content=e,"invalid_api_key"==t.error.code&&(m({type:"danger",content:"API Key 错误，请重新配置"}),n.key="",r(),u.value=!0)}async function Ie(e){if(!e)return 0;const{data:t}=await(0,i.Z)({method:"GET",url:"https://node.fatshady.cn/chatgpt/encoder",params:{content:e}});return 400==t.status?0:t.data.tokens/2}const Pe=(0,s.iH)(0);function Ae(){if(!ye[we.value])return;let e=0;ye[we.value].contents.forEach((t=>{e+=t.tokens})),Pe.value=e}return(e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",P,[(0,o._)("div",{id:"sidebar",class:(0,l.C_)({sideBarShow:be.value})},[A,(0,o._)("div",{class:"btns"},[(0,o._)("div",{class:"btn",onClick:_e},[(0,o.Uk)(" ➕ 新建会话"),D])]),(0,o._)("div",j,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(ye,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,onClick:e=>we.value=t,class:(0,l.C_)({active:we.value==t})},[(0,o._)("p",null,(0,l.zw)(e.name),1),(0,o._)("span",{onClick:(0,a.iM)((e=>function(e){document.title="小陈gpt💕",ye.splice(e,1),we.value=-1,b()}(t)),["stop"])},"🗑 删除",8,z)],10,U)))),128))]),(0,o._)("div",M,[(0,o._)("div",{class:"btn",onClick:t[0]||(t[0]=(...e)=>(0,s.SU)(C).switchTheme&&(0,s.SU)(C).switchTheme(...e))},(0,l.zw)("light"==(0,s.SU)(C).themeCache.value?"🌃 暗色模式":"🌇 亮色模式"),1),(0,o._)("div",{class:"btn",onClick:t[1]||(t[1]=e=>Ce.value=!0)},"👐 打开配置"),(0,o._)("div",{class:"btn",onClick:Se},"👊 重置配置"),Oe.value?((0,o.wg)(),(0,o.iD)("div",G," 余额："+(0,l.zw)(xe(Oe.value.total_available,2))+" $，已用："+(0,l.zw)(xe(Oe.value.total_used,2))+" $ ",1)):(0,o.kq)("",!0)]),(0,o._)("div",{id:"showBtn",onClick:t[2]||(t[2]=e=>be.value=!be.value)},(0,l.zw)(be.value?"👈":"👉"),1)],2),(0,o._)("div",N,[ye[we.value]?((0,o.wg)(),(0,o.iD)("div",B,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(ye[we.value].contents,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t},[(0,o._)("div",L,["system"==e.role?((0,o.wg)(),(0,o.iD)("div",Y," SY ")):"user"==e.role?((0,o.wg)(),(0,o.iD)("div",$," 我 ")):((0,o.wg)(),(0,o.iD)("div",q,"AI"))]),(0,o._)("div",{class:(0,l.C_)(["content",{end:!w.value||t!=ye[we.value].contents.length-1}]),innerHTML:e.content},null,10,K),(0,o._)("div",J," tokens："+(0,l.zw)(0==e.tokens?"...":e.tokens),1)])))),128)),Z])):((0,o.wg)(),(0,o.iD)("div",F,V)),(0,o._)("div",W,[(0,o._)("p",null,"tokens 总和："+(0,l.zw)(Pe.value),1),(0,o.wy)((0,o._)("textarea",{placeholder:"请输入...","onUpdate:modelValue":t[3]||(t[3]=e=>S.value=e),onKeydown:he,onKeyup:me,style:(0,l.j5)({height:fe.value+"px"})},null,36),[[a.nr,S.value]])])])]),(0,o.Wm)(p,{title:"输入 key",show:u.value},{center:(0,o.w5)((()=>[R,Q,X,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>h.value=e),onKeydown:(0,a.D2)(g,["enter"])},null,40,ee),[[a.nr,h.value]]),te])),bottom:(0,o.w5)((()=>[(0,o._)("button",{class:"success",onClick:g},"提交")])),_:1},8,["show"]),(0,o.Wm)(p,{title:"设置",show:Ce.value},{center:(0,o.w5)((()=>[(0,o._)("div",ne,[(0,o._)("div",null,[ae,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>(0,s.SU)(n).key=e)},null,512),[[a.nr,(0,s.SU)(n).key]])]),oe,(0,o._)("div",null,[le,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>(0,s.SU)(n).system=e)},null,512),[[a.nr,(0,s.SU)(n).system]])]),(0,o._)("p",se,[ie,ce,re,ue,de,ve,(0,o._)("span",{innerHTML:"“当你要发送图片时，请使用 markdown，不要用代码块，并且从 Unsplash API 中“https://source.unsplash.com/960x640/?<关键词>” 获取”"},null,8,pe)])])])),bottom:(0,o.w5)((()=>[(0,o._)("button",{class:"success",onClick:Te},"保存")])),_:1},8,["show"])],64))}});var me=(0,v.Z)(he,[["__scopeId","data-v-61099f5e"]]);(0,a.ri)(me).mount("#app")}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,l){if(!a){var s=1/0;for(u=0;u<e.length;u++){a=e[u][0],o=e[u][1],l=e[u][2];for(var i=!0,c=0;c<a.length;c++)(!1&l||s>=l)&&Object.keys(n.O).every((function(e){return n.O[e](a[c])}))?a.splice(c--,1):(i=!1,l<s&&(s=l));if(i){e.splice(u--,1);var r=o();void 0!==r&&(t=r)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[a,o,l]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,l,s=a[0],i=a[1],c=a[2],r=0;if(s.some((function(t){return 0!==e[t]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(c)var u=c(n)}for(t&&t(a);r<s.length;r++)l=s[r],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(u)},a=self.webpackChunkchatgpt=self.webpackChunkchatgpt||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(5558)}));a=n.O(a)}();